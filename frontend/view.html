<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Student Detail</title>
  <link rel="stylesheet" href="css/view.css">
  <link href="https://fonts.googleapis.com/css2?family=Kanit&display=swap" rel="stylesheet">
</head>
<body>

  <header>
    <div class="logo">ğŸ“˜ Education System</div>
    <nav>
      <a href="student.html">â†© Back</a>
    </nav>
  </header>

  <div class="view-card" id="viewCard">
    <!-- Student info will appear here -->
  </div>

  <script src="https://cdn.jsdelivr.net/npm/axios@1.1.2/dist/axios.min.js"></script>
  <script>
    const BASE_URL = 'http://localhost:8000';

    async function loadStudent() {
      const params = new URLSearchParams(window.location.search);
      const id = params.get("id");
      
      if (!id) return;

      try {
        const res = await axios.get(`${BASE_URL}/students/${id}`);
        const s = res.data;

        // âœ… à¹à¸›à¸¥à¸‡à¹€à¸§à¸¥à¸²à¹€à¸£à¸µà¸¢à¸™à¹ƒà¸«à¹‰à¹€à¸«à¸¥à¸·à¸­à¹à¸„à¹ˆà¸§à¸±à¸™à¸—à¸µà¹ˆ
        const formattedDate = new Date(s.time).toLocaleDateString('th-TH', {
          day: '2-digit',
          month: 'long',
          year: 'numeric'
        });

        document.getElementById("viewCard").innerHTML = `
          <h2>ğŸ‘¤ ${s.firstname} ${s.lastname}</h2>
          <p>ğŸ‚ à¸­à¸²à¸¢à¸¸: ${s.age}</p>
          <p>ğŸ« à¸Šà¸±à¹‰à¸™à¸›à¸µ: ${s.education_level}</p>
          <p>ğŸ“ à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆ: ${s.address}</p>
          <p>ğŸ“š à¸£à¸²à¸¢à¸§à¸´à¸Šà¸²: ${s.subject} | à¹€à¸à¸£à¸”: ${s.grade}</p>
          <p>ğŸ¯ à¸à¸´à¸ˆà¸à¸£à¸£à¸¡à¹€à¸ªà¸£à¸´à¸¡: ${s.extralearningactivities}</p>
          <p>ğŸ‘¨â€ğŸ« à¸­à¸²à¸ˆà¸²à¸£à¸¢à¹Œà¸œà¸¹à¹‰à¸ªà¸­à¸™: ${s.teacherfirstname} ${s.teacherlastname}</p>
          <p>ğŸ•’ à¸§à¸±à¸™à¸—à¸µà¹ˆà¹€à¸£à¸µà¸¢à¸™: ${formattedDate}</p>
        `;
      } catch (err) {
        document.getElementById("viewCard").innerHTML = `<p style="color: red">à¹„à¸¡à¹ˆà¸à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸™à¸±à¸à¹€à¸£à¸µà¸¢à¸™</p>`;
      }
    }

    loadStudent();
  </script>
</body>
</html>
